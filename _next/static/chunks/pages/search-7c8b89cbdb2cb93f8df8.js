_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{"19J2":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r("eOhz")}])},HJBe:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("mrSG"),a=r("FFOo");function c(e){return void 0===e&&(e=null),function(t){return t.lift(new o(e))}}var o=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.defaultValue))},e}(),i=function(e){function t(t,r){var n=e.call(this,t)||this;return n.defaultValue=r,n.isEmpty=!0,n}return n.b(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(a.a)},eOhz:function(e,t,r){"use strict";r.r(t);var n=r("ODXe"),a=r("KQm4"),c=r("rePB"),o=r("q1tI"),i=r.n(o),s=r("nOHt"),u=r("m6qE"),l=r("F/XL"),p=r("0/uQ"),f=r("G5J1"),h=r("67Y/"),b=r("mrSG"),m=r("FFOo");var d=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new y(e,this.compare,this.keySelector))},e}(),y=function(e){function t(t,r,n){var a=e.call(this,t)||this;return a.keySelector=n,a.hasKey=!1,"function"===typeof r&&(a.compare=r),a}return b.b(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var r=this.keySelector;t=r?r(e):e}catch(a){return this.destination.error(a)}var n=!1;if(this.hasKey)try{n=(0,this.compare)(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))},t}(m.a),O=r("T1DM");var j=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new v(e,this.dueTime,this.scheduler))},e}(),v=function(e){function t(t,r,n){var a=e.call(this,t)||this;return a.dueTime=r,a.scheduler=n,a.debouncedSubscription=null,a.lastValue=null,a.hasValue=!1,a}return b.b(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(w,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(m.a);function w(e){e.debouncedNext()}var P=r("15JJ"),k=r("VnD/"),g=r("psW0"),S=r("b7Yd"),_=r("HJBe"),E=r("JSc3"),q=r("CafY"),x=r("CIQI"),N=r("o7Cv"),D=r("MP/I"),V=r("AzZl"),R=r("aiyh"),C=i.a.createElement;function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U={resources:[]},L="RESOURCES_SET",F="RESOURCES_ADD";function I(e,t){switch(t.type){case L:return T(T({},e),{},{resources:t.payload});case F:var r=Object(a.a)([].concat(Object(a.a)(e.resources),Object(a.a)(t.payload)).reduce((function(e,t){return e.set(t.url.href,t),e}),new Map).values()).sort((function(e,t){return e.position-t.position}));return T(T({},e),{},{resources:r});default:throw new Error("Uknown Action: ".concat(t.type))}}var K="P856",M="P407",Q="Q1860";function X(e){return e.pipe(Object(h.a)((function(e){return Object(n.a)(e,1)[0]})),(function(e){return e.lift(new d(a,c))}),(t=250,void 0===r&&(r=O.a),function(e){return e.lift(new j(t,r))}),Object(P.a)((function(e){if(!e)return Object(l.a)({type:L,payload:[]});try{var t=new URL(e);return Object(x.a)(t).pipe(Object(k.a)((function(e){return!e||!e.ok})),Object(g.a)((function(e){return Object(N.a)(e)})),Object(h.a)((function(e){return{type:L,payload:e?[e]:[]}})))}catch(r){return Object(l.a)(e).pipe(Object(g.a)((function(e){var t=new URL("https://www.wikidata.org/w/api.php");return t.searchParams.set("action","query"),t.searchParams.set("format","json"),t.searchParams.set("list","search"),t.searchParams.set("formatversion",2),t.searchParams.set("srinfo",""),t.searchParams.set("srprop",""),t.searchParams.set("srenablerewrites",1),t.searchParams.set("origin","*"),t.searchParams.set("srsearch","haswbstatement:".concat(K," ").concat(e)),Object(E.a)(t)})),Object(g.a)((function(e){return e.json()})),Object(g.a)((function(e){return e.query&&e.query.search&&0!==e.query.search.length?Object(p.a)(e.query.search.map((function(e){var t=e.title,r=new URL("https://www.wikidata.org/w/api.php");return r.searchParams.set("action","wbgetclaims"),r.searchParams.set("format","json"),r.searchParams.set("origin","*"),r.searchParams.set("formatversion",2),r.searchParams.set("entity",t),r.searchParams.set("property",K),r.searchParams.set("props",""),r}))).pipe(Object(g.a)((function(e,t){return Object(E.a)(e).pipe(Object(g.a)((function(e){return e.json()})),Object(g.a)((function(e){return e&&e.claims&&e.claims[K]?Object(p.a)(e.claims[K].filter((function(e){if("deprecated"===e.type)return!1;if(e.qualifiers&&e.qualifiers[M]&&!e.qualifiers[M].map((function(e){return e.datavalue.value.id})).includes(Q))return!1;try{return!!new URL(e.mainsnak.datavalue.value)}catch(t){return!1}})).sort((function(e,t){return"preferred"===e.rank?1:"preferred"===t.rank?-1:0})).map((function(e){return e.mainsnak.datavalue.value}))):f.a})),Object(g.a)((function(e,r){return Object(x.a)(e).pipe(Object(g.a)((function(e){return e&&e.ok?Object(N.a)(e):f.a})),Object(k.a)((function(e){return"OrderedCollection"===e.type})),Object(h.a)((function(e){return T(T({},e),{},{position:1e3*t+r})})))})))})),Object(S.a)(0),Object(k.a)((function(e){return e.length>0})),Object(h.a)((function(e,t){var r=e.sort((function(e,t){return e.position-t.position}));return 0===t?{type:L,payload:r}:{type:F,payload:r}})),Object(_.a)({type:L,payload:[]})):Object(l.a)({type:L,payload:[]})})))}})));var t,r,a,c}t.default=function(){var e=Object(s.useRouter)(),t=e.query.q,r=Object(o.useReducer)(I,U),n=r[0],c=r[1];Object(u.a)(X,c,[t]);var i=Object(o.useCallback)((function(t){var r=t.target,n={};r.value&&(n.q=r.value),e.replace({pathname:"/search",query:n})}),[e]),l=Object(o.useCallback)((function(r){r.preventDefault();try{var n=new URL(t),a=Object(R.a)(n),c=a.as,o=a.href;e.push(o,c)}catch(i){}}),[t,e]),p=Object(o.useMemo)((function(){return n.resources.reduce((function(e,t){return"OrderedCollection"===t.type?D.a.includes(t.url.mediaType)&&(e.collections=[].concat(Object(a.a)(e.collections),[t])):e.items=[].concat(Object(a.a)(e.items),[t]),e}),{collections:[],items:[]})}),[n.resources]),f=p.collections,h=p.items;return C(q.a,null,C("div",{className:"container pt-5"},C("div",{className:"row"},C("div",{className:"mt-3 col-lg-8 offset-lg-2 col"},C("form",{className:"mb-3",onSubmit:l},C("div",{className:"form-group"},C("label",{htmlFor:"q"},"Search"),C("input",{className:"form-control form-control-lg bg-transparent text-primary",type:"text",name:"q",id:"q",autoComplete:"off",value:t||"",onChange:i}),C("small",{className:"form-text text-muted"},"Text or URL"))),f.map((function(e){return C(V.a,{key:e.url.href,resource:e})})),h.map((function(e){return C(V.a,{key:e.url.href,resource:e})}))))))}}},[["19J2",1,2,3,5,0,4,6]]]);